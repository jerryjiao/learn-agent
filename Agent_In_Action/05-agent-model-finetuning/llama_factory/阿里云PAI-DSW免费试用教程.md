ä¸ºäº†ç¡®ä¿æ‚¨åœ¨ä½¿ç”¨é˜¿é‡Œäº‘ PAI-DSW è¿›è¡Œå®éªŒæ—¶é¡ºåˆ©ä¸”**é›¶æˆæœ¬**ï¼Œæˆ‘å°†æ“ä½œæ­¥éª¤ç»†åŒ–ä¸º**ä¿å§†çº§æ•™ç¨‹**ã€‚

è¯·åŠ¡å¿…ä¸¥æ ¼éµå¾ªä»¥ä¸‹æµç¨‹ï¼Œç‰¹åˆ«æ˜¯å…³äº**åœ°åŸŸé€‰æ‹©**å’Œ**å®ä¾‹é‡Šæ”¾**çš„ç¯èŠ‚ã€‚

### ğŸš¨ æ ¸å¿ƒåŸåˆ™

1. **å…ˆé¢†åˆ¸ï¼Œå†åˆ›å»º**ï¼šæœªé¢†å–è¯•ç”¨åŒ…ç›´æ¥åˆ›å»ºå®ä¾‹ = **ç«‹å³æ‰£è´¹**ã€‚
2. **ä¸æ‰©å®¹**ï¼šåˆ›å»ºå®ä¾‹æ—¶ï¼Œç³»ç»Ÿç›˜ä¿æŒé»˜è®¤ 100GBï¼Œ**ç»å¯¹ä¸è¦æ‰‹åŠ¨å¢åŠ å®¹é‡**ï¼Œå¦åˆ™å³ä½¿å…³æœºä¹Ÿä¼šæŒç»­æ‰£é’±ã€‚
3. **ç”¨å®Œå³åˆ **ï¼šå¯¹äºå…è´¹ç”¨æˆ·ï¼Œ**â€œåˆ é™¤å®ä¾‹â€** æ˜¯å”¯ä¸€ 100% å®‰å…¨çš„æ“ä½œã€‚ä¸è¦ä»…ä»…â€œåœæ­¢â€ã€‚

------

### ç¬¬ä¸€é˜¶æ®µï¼šé¢†å–å…è´¹èµ„æ ¼

**ç›®æ ‡**ï¼šç¡®ä¿æ‚¨çš„è´¦æˆ·é‡Œå·²ç»æœ‰äº†â€œå…è´¹è®¡ç®—æ—¶â€çš„ä½™é¢ã€‚

1. **è¿›å…¥è¯•ç”¨ä¸­å¿ƒ**

   - ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ã€‚
   - è®¿é—® [é˜¿é‡Œäº‘å…è´¹è¯•ç”¨ä¸­å¿ƒ](https://free.aliyun.com/)ã€‚

2. **å®šä½äº§å“**

   - åœ¨é¡µé¢æœç´¢æ è¾“å…¥ `DSW` æˆ– `äº¤äº’å¼å»ºæ¨¡`ã€‚

   - æ‰¾åˆ°å¡ç‰‡ï¼š**â€œäº¤äº’å¼å»ºæ¨¡ PAI-DSWâ€**ã€‚

     ![äº¤äº’å¼å»ºæ¨¡ PAI-DSW](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251124634.png)

3. **é¢†å–æƒç›Š**

   - ç‚¹å‡»å¡ç‰‡ä¸Šçš„ **â€œç«‹å³è¯•ç”¨â€**ã€‚

   - ç³»ç»Ÿä¼šæç¤ºæ‚¨é€‰æ‹©â€œä¸ªäººâ€æˆ–â€œä¼ä¸šâ€è®¤è¯ï¼ˆéœ€å®åè®¤è¯ï¼‰ã€‚

   - **æ³¨æ„**ï¼šå¦‚æœæ‚¨ä»¥å‰ç”¨è¿‡ PAIï¼Œè¿™é‡Œå¯èƒ½æ— æ³•é¢†å–ã€‚

     ![ç«‹å³è¯•ç”¨](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251126499.png)

     ![æäº¤æˆåŠŸ](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251127289.png)

     > :notes: [PAI-DSWå…è´¹è¯•ç”¨ï¼šæ•™ç¨‹æŒ‡å—](https://help.aliyun.com/document_detail/2261126.html?spm=5176.29188366.websiteFastBuy.3.1eaa3e4dVx46y5)

4. **æ ¸å®åˆ°è´¦**

   - é¡¶éƒ¨æ‰¾åˆ° **â€œæˆ‘çš„è¯•ç”¨â€**ã€‚

     ![image-20251125113552833](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251135343.png)

   - çŠ¶æ€æ åº”æ˜¾ç¤ºï¼š`PAI-DSW å…è´¹è¯•ç”¨èµ„æºæŠµæ‰£åŒ…`ï¼ŒçŠ¶æ€ä¸º **â€œè¿è¡Œä¸­â€**ã€‚

     ![image-20251125113635128](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251136520.png)

------

### ç¬¬äºŒé˜¶æ®µï¼šåˆ›å»ºå¾®è°ƒç¯å¢ƒ

**ç›®æ ‡**ï¼šåˆ›å»ºä¸€ä¸ªæ—¢èƒ½è·‘å¤§æ¨¡å‹ï¼Œåˆç¬¦åˆå…è´¹è§„åˆ™çš„å®ä¾‹ã€‚

1. **è¿›å…¥ PAI æ§åˆ¶å°**

   - æœç´¢ `PAI` è¿›å…¥ **äººå·¥æ™ºèƒ½å¹³å° PAI** æ§åˆ¶å°ã€‚

     ![image-20251125113805854](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251138185.png)

   - ä¸€é”®å¼€é€š **äººå·¥æ™ºèƒ½å¹³å° PAI** ï¼ˆå¼€é€šè¿‡ï¼Œè¯·è·³è¿‡ï¼‰

     ![image-20251125113959791](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251140191.png)

   - åœ¨å·¦ä¾§å¯¼èˆªæ é€‰æ‹© **â€œäº¤äº’å¼å»ºæ¨¡ (DSW)â€**ã€‚

     ![image-20251125114132838](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251141237.png)

2. **æ–°å»ºå®ä¾‹ï¼ˆæŒ‰ä»¥ä¸‹å‚æ•°ä¸¥æ ¼é…ç½®ï¼‰**

   - ç‚¹å‡» **â€œåˆ›å»ºå®ä¾‹â€** æŒ‰é’®ã€‚

   - **åŸºç¡€ä¿¡æ¯**ï¼š

     - **å®ä¾‹åç§°**ï¼šéšæ„å¡«å†™ï¼ˆå¦‚ `LLM-Finetune-01`ï¼‰ã€‚

   - **åœ°åŸŸ (Region)**ï¼š**éå¸¸é‡è¦ï¼**

     - å¿…é¡»é€‰æ‹©æ”¯æŒå…è´¹è¯•ç”¨çš„åœ°åŸŸã€‚

     - **å¼ºçƒˆæ¨è**ï¼š**ååŒ— 6 (ä¹Œå…°å¯Ÿå¸ƒ)**ã€‚

       ![image-20251125141156026](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251411188.png)

     - *ç†ç”±*ï¼šä¹Œå…°å¯Ÿå¸ƒæ˜¯ç®—åŠ›ä¸­å¿ƒï¼ŒGPU èµ„æºæœ€ä¸°å¯Œï¼Œä¸å®¹æ˜“å‡ºç°â€œæš‚æ— åº“å­˜â€çš„æƒ…å†µã€‚å…¶ä»–å¯é€‰ï¼šåŒ—äº¬ã€ä¸Šæµ·ã€æ­å·ã€æ·±åœ³ã€‚

   - **èµ„æºç±»å‹**ï¼šå¿…é¡»é€‰æ‹© **â€œå…¬å…±èµ„æºâ€**ã€‚

   - **èµ„æºè§„æ ¼ (**èµ„æºè§„æ ¼é€‰æ‹©å…è´¹è¯•ç”¨èµ„æº)**ï¼š

     - ä¸ºäº†å¾®è°ƒå¤§æ¨¡å‹ï¼ˆå¦‚ Qwen, Llama-3-8Bï¼‰ï¼Œä½ éœ€è¦æ˜¾å­˜ã€‚

     - **æ¨èå‹å·**ï¼š`ecs.gn7i-c8g1.2xlarge` (A10 æ˜¾å¡, 24G æ˜¾å­˜)ã€‚

       ![image-20251125140826768](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251408142.png)

     - *æ¶ˆè€—é€Ÿåº¦*ï¼šçº¦ 7 ä¸ªè®¡ç®—æ—¶/å°æ—¶ï¼ˆå¦‚æœä¸é€‰è¿™ä¸ªï¼Œé€‰ V100 ä¹Ÿå¯ä»¥ï¼Œä½†æ¶ˆè€—æ›´å¿«ï¼‰ã€‚

   - **é•œåƒé€‰æ‹©**ï¼š

     - é€‰æ‹© **â€œå®˜æ–¹é•œåƒâ€**ã€‚
     - æ¨èï¼š`pytorch:2.6.0-gpu-py310-cu124-ubuntu22.04`

   - **å­˜å‚¨é…ç½® (é¿å‘ç‚¹)**ï¼š

     - ç³»ç»Ÿç›˜ï¼šä¿æŒé»˜è®¤ **100GB**ã€‚
     - **åˆ‡å‹¿æ”¹åŠ¨**ï¼š**ä¸è¦**ç‚¹å‡»â€œæ‰©å®¹â€æˆ–å°†å…¶æ‹‰å¤§åˆ° 200GB+ã€‚å…è´¹é¢åº¦åªåŒ… 100GBï¼Œå¤šå‡ºæ¥çš„éƒ¨åˆ†æ˜¯æŒ‰å°æ—¶æ”¶è´¹çš„ï¼Œä¸”æ— æ³•é€šè¿‡å…³æœºåœæ­¢è®¡è´¹ã€‚

     | **é…ç½®æ¿å—** | **é…ç½®é¡¹**   | **å½“å‰è®¾ç½®å€¼**                              | **å…³é”®è¯´æ˜ï¼ˆå¿…è¯»ï¼‰**                                         |
     | ------------ | ------------ | ------------------------------------------- | ------------------------------------------------------------ |
     | **åŸºç¡€ä¿¡æ¯** | å®ä¾‹åç§°     | `LLM-Finetune-01`                           | è‡ªå®šä¹‰åç§°ï¼Œæ–¹ä¾¿è¯†åˆ«ã€‚                                       |
     |              | æ ‡ç­¾         | æœªç»‘å®šæ ‡ç­¾                                  | éå¿…é¡»ï¼Œå¯å¿½ç•¥ã€‚                                             |
     | **èµ„æºä¿¡æ¯** | **èµ„æºç±»å‹** | **å…¬å…±èµ„æº**                                | âœ… **æ­£ç¡®**ã€‚å…è´¹è¯•ç”¨å¿…é¡»é€‰æ‹©â€œå…¬å…±èµ„æºâ€ã€‚                     |
     |              | **èµ„æºè§„æ ¼** | `ecs.gn7i-c8g1.2xlarge`                     | **NVIDIA A10 (24GB æ˜¾å­˜)** 8 vCPU, 30 GiB å†…å­˜ã€‚ é€‚åˆ 7B/8B æ¨¡å‹å¾®è°ƒã€‚ |
     |              | ç«ä»·è´­ä¹°     | å…³é—­ (æœªå¼€å¯)                               | âœ… **æ­£ç¡®**ã€‚ä¿æŒå…³é—­ã€‚                                       |
     |              | é©±åŠ¨è®¾ç½®     | é»˜è®¤é©±åŠ¨: 550                               | é€‚é…è¾ƒæ–°çš„ CUDA ç‰ˆæœ¬ã€‚                                       |
     | **ç¯å¢ƒä¿¡æ¯** | é•œåƒæ¥æº     | å®˜æ–¹é•œåƒ                                    | ä½¿ç”¨é˜¿é‡Œäº‘é¢„ç½®ç¯å¢ƒï¼Œçœå»é…ç½®é©±åŠ¨éº»çƒ¦ã€‚                       |
     |              | **é•œåƒç‰ˆæœ¬** | `pytorch:2.6.0-gpu-py310-cu124-ubuntu22.04` | åŒ…å«ï¼š â€¢ **ModelScope**: 1.18.0 â€¢ **PyTorch**: 2.3.0 (è¾ƒæ–°) â€¢ **Python**: 3.10 â€¢ **CUDA**: 12.1 â€¢ **OS**: Ubuntu 22.04 |
     |              | **ç³»ç»Ÿç›˜**   | **100 GiB**                                 | âœ… **å®Œç¾**ã€‚ **åˆ‡å‹¿ä¿®æ”¹ï¼** å›¾ç‰‡åº•éƒ¨è“è‰²æç¤ºå·²æ˜ç¡®ï¼šâ€œå½“å‰å®ä¾‹èµ é€ 100 GiB å…è´¹ç³»ç»Ÿç›˜é¢åº¦â€ã€‚ä¸€æ—¦è¶…è¿‡ 100Gï¼Œå…³æœºä¹Ÿä¼šæ‰£è´¹ã€‚ |

3. **æäº¤åˆ›å»º**

   ![image-20251203150222348](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202512031502790.png)

   - ç„¶åç‚¹å‡»åˆ›å»ºï¼Œç­‰å‡ åˆ†é’Ÿååˆ›å»ºæˆåŠŸã€‚

     ![image-20251125141513402](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251415843.png)

   > #### é‡è¦æç¤ºï¼šé¿å…é¢å¤–è®¡è´¹
   >
   > - **ç”¨å®Œç«‹å³æ‰‹åŠ¨åœæ­¢å®ä¾‹**ï¼šé—²ç½®å…³æœºç­–ç•¥ä¸ä¿è¯å¿…å®šè§¦å‘ã€‚ä¸ä½¿ç”¨æ—¶ï¼Œè¯·åŠ¡å¿…åœ¨æ§åˆ¶å°æ‰‹åŠ¨åœæ­¢å®ä¾‹ï¼Œå¦åˆ™å°†æŒç»­æ¶ˆè€—è®¡ç®—æ—¶ã€‚
   > - **æ‰©å®¹ç³»ç»Ÿç›˜ä¼šæŒç»­æ”¶è´¹**ï¼šè¯•ç”¨ä»…åŒ…å«å…è´¹çš„100 GBç³»ç»Ÿç›˜ã€‚ä»»ä½•å¯¹ç³»ç»Ÿç›˜çš„æ‰©å®¹éƒ¨åˆ†éƒ½ä¼šäº§ç”ŸæŒ‰é‡ä»˜è´¹ï¼Œä¸”åœæ­¢å®ä¾‹æ— æ³•ä¸­æ­¢è¯¥éƒ¨åˆ†è®¡è´¹ã€‚è‹¥è¦å½»åº•åœæ­¢æ‰€æœ‰è®¡è´¹ï¼Œå¿…é¡»åˆ é™¤å®ä¾‹ã€‚

------

### ç¬¬ä¸‰é˜¶æ®µï¼šç®—åŠ›è§„åˆ’ä¸ä½¿ç”¨

> **ç›®æ ‡**ï¼šæ¸…æ¥šè‡ªå·±è¿˜èƒ½è·‘å¤šä¹…ï¼Œé¿å…è·‘åˆ°ä¸€åŠæ²¡é¢åº¦äº†ã€‚
>
> æ‚¨é¢†å–çš„é¢åº¦æ˜¯ **â€œè®¡ç®—æ—¶ (CU)â€**ï¼Œä¸æ˜¯â€œå°æ—¶â€ã€‚
>
> - **æ¯æœˆå¯ç”¨é¢åº¦**ï¼š250 è®¡ç®—æ—¶ï¼ˆæ€»é¢åº¦ 750ï¼Œåˆ† 3 ä¸ªæœˆå‘ï¼‰ã€‚
> - **A10 æ˜¾å¡ (gn7i) æ¶ˆè€—ç‡**ï¼šçº¦ 7 è®¡ç®—æ—¶ / 1 å°æ—¶ã€‚
>
> æ‚¨çš„å®é™…å¯ç”¨æ—¶é•¿è®¡ç®—ï¼š
>
> $$\text{æ¯æœˆå¯ç”¨æ—¶é•¿} \approx \frac{250 \text{ (é¢åº¦)}}{7 \text{ (æ¶ˆè€—ç‡)}} \approx 35.7 \text{ å°æ—¶}$$
>
> **ä½¿ç”¨å»ºè®®ï¼š**
>
> - æ¯å¤©å­¦ä¹ æˆ–å¾®è°ƒ 1-2 å°æ—¶ï¼Œåˆšå¥½å¯ä»¥ç”¨æ»¡ä¸€ä¸ªæœˆã€‚
> - **ä¸è¦æŒ‚æœºè¿‡å¤œï¼ä¸è¦æŒ‚æœºè¿‡å¤œï¼**

#### 1. æ§åˆ¶å°è®¿é—®æ­¥éª¤

1. **ç™»å½•ä¸å®šä½**ï¼šç™»å½• [é˜¿é‡Œäº‘ PAI æ§åˆ¶å°](https://pai.console.aliyun.com/)ã€‚

2. **å·¥ä½œç©ºé—´é€‰æ‹©**ï¼šåœ¨å·¦ä¾§å¯¼èˆªæ å•å‡» **â€œå·¥ä½œç©ºé—´åˆ—è¡¨â€**ï¼Œç‚¹å‡»ç›®æ ‡å·¥ä½œç©ºé—´åç§°è¿›å…¥ã€‚

3. **åœ°åŸŸåˆ‡æ¢**ï¼šåœ¨é¡µé¢å·¦ä¸Šæ–¹ï¼ŒåŠ¡å¿…é€‰æ‹©æ‚¨åˆ›å»ºå®ä¾‹æ—¶æ‰€åœ¨çš„åœ°åŸŸï¼ˆå¦‚ï¼š**ååŒ— 6 ä¹Œå…°å¯Ÿå¸ƒ**ï¼‰ã€‚

4. **è¿›å…¥ DSW**ï¼šåœ¨å·¦ä¾§å¯¼èˆªæ é€‰æ‹© **â€œæ¨¡å‹å¼€å‘ä¸è®­ç»ƒâ€** > **â€œäº¤äº’å¼å»ºæ¨¡ï¼ˆDSWï¼‰â€**ã€‚

5. **å¯åŠ¨å®ä¾‹**ï¼šåœ¨å®ä¾‹åˆ—è¡¨ä¸­æ‰¾åˆ°ç›®æ ‡å®ä¾‹ï¼Œå•å‡»æ“ä½œåˆ—ä¸‹çš„ **â€œæ‰“å¼€â€**ï¼Œå³å¯è¿›å…¥ DSW ç¼–ç¨‹é¡µé¢ã€‚

   ![image-20251125142537442](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251425883.png)

#### 2. DSW ç•Œé¢åŠŸèƒ½è¯¦è§£

è¿›å…¥ DSW å®ä¾‹åï¼Œä¸»è¦æ“ä½œåŒºåŸŸåŠŸèƒ½å¦‚ä¸‹ï¼š

- **Notebook**ï¼šäº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒï¼Œæ”¯æŒå¿«é€Ÿè¯»å–æ•°æ®ã€å¼€å‘ç®—æ³•ã€è®­ç»ƒåŠéƒ¨ç½²æ¨¡å‹ï¼ˆç±»ä¼¼ Jupyterï¼‰ã€‚

- **WebIDE**ï¼šåŸºäºæµè§ˆå™¨çš„å…¨é¢é›†æˆå¼€å‘ç¯å¢ƒï¼Œé€‚åˆç¼–å†™å¤æ‚çš„å·¥ç¨‹ä»£ç ï¼Œæ— éœ€æœ¬åœ°é…ç½®ã€‚

- **Terminal**ï¼šå‘½ä»¤è¡Œç»ˆç«¯ï¼Œç”¨äºæ‰§è¡Œç³»ç»Ÿçº§å‘½ä»¤ï¼ˆå¦‚ `nvidia-smi` æŸ¥çœ‹æ˜¾å¡ã€`pip install` å®‰è£…åº“ï¼‰ã€‚

- **èµ„æºæ°´ä½**ï¼šä½äºç•Œé¢è¾¹ç¼˜ï¼Œå®æ—¶æ˜¾ç¤ºå½“å‰ **CPU** å’Œ **å†…å­˜** çš„ä½¿ç”¨ç‡ã€‚

- **é…ç½®æŸ¥çœ‹**ï¼šå¯æŸ¥çœ‹å½“å‰å®ä¾‹çš„åŸºç¡€ä¿¡æ¯ã€é•œåƒç‰ˆæœ¬å’Œèµ„æºè§„æ ¼ã€‚

  ![image](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251426413.png)

  | **åŒºåŸŸ** | **æè¿°**                                                     |
  | -------- | ------------------------------------------------------------ |
  | â‘         | é¡¶éƒ¨èœå•æ ã€‚                                                 |
  | â‘¡        | å·¦ä¾§å·¥å…·æ ã€‚                                                 |
  | â‘¢        | Notebookå·¥å…·ã€‚                                               |
  | â‘£        | å¯æŸ¥çœ‹å¹¶ä¿®æ”¹å½“å‰å®ä¾‹é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºæœ¬ä¿¡æ¯ã€é•œåƒå’Œèµ„æºç­‰ã€‚   |
  | â‘¤        | Notebookæ˜¯ä¸€ç§äº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒï¼Œæ‚¨å¯ä»¥åœ¨Notebookä¸­ç¼–å†™å’Œæ‰§è¡Œä»£ç ï¼Œå®ç°å¿«é€Ÿè¯»å–æ•°æ®ã€å¼€å‘ç®—æ³•ã€è®­ç»ƒåŠéƒ¨ç½²æ¨¡å‹ã€‚ |
  | â‘¥        | WebIDEæ˜¯ä¸€ä¸ªåŸºäºæµè§ˆå™¨çš„å…¨é¢é›†æˆå¼€å‘ç¯å¢ƒï¼Œå®ƒä¸ä»…æ”¯æŒNotebookåŠŸèƒ½ï¼Œè¿˜æä¾›äº†æ›´å¤šçš„å¼€å‘å·¥å…·ç‰¹æ€§ã€‚æ‚¨å¯ä»¥é€šè¿‡WebIDEåˆ›å»ºã€ç¼–è¾‘å’Œè¿è¡Œè„šæœ¬æ–‡ä»¶ï¼Œæ— éœ€å®‰è£…æœ¬åœ°å¼€å‘ç¯å¢ƒå°±èƒ½è¿›è¡Œå¤æ‚çš„è½¯ä»¶å¼€å‘å’Œç»´æŠ¤å·¥ä½œã€‚ |
  | â‘¦        | Terminalæä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢ï¼Œæ‚¨å¯ä»¥é€šè¿‡Terminalå®‰è£…è½¯ä»¶åŒ…ã€ç®¡ç†æ–‡ä»¶ç³»ç»Ÿã€è®¿é—®æœåŠ¡å™¨èµ„æºã€è¿è¡ŒShellè„šæœ¬ä»¥åŠæ‰§è¡Œå…¶ä»–ä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„ä»»åŠ¡ã€‚ |
  | â‘§        | èµ„æºæ°´ä½ï¼Œå¯æŸ¥çœ‹å½“å‰CPUå’Œå†…å­˜ä½¿ç”¨ç‡ã€‚                        |

#### 3. å®ä¾‹ç®¡ç†æ“ä½œæŒ‡å¼•

åœ¨ DSW åˆ—è¡¨é¡µï¼Œç‚¹å‡»å®ä¾‹åç§°æˆ–æ“ä½œæ ï¼Œå¯æ‰§è¡Œä»¥ä¸‹ç®¡ç†åŠ¨ä½œï¼š

- **å˜æ›´é…ç½®**ï¼šä¿®æ”¹å®ä¾‹çš„èµ„æºè§„æ ¼ï¼ˆå¦‚å‡çº§ GPUï¼‰æˆ–ç½‘ç»œé…ç½®ã€‚
- **åˆ¶ä½œé•œåƒ**ï¼šå°†å½“å‰è¿è¡Œç¯å¢ƒï¼ˆåŒ…å«å·²å®‰è£…çš„åº“ï¼‰ä¿å­˜ä¸º Docker é•œåƒï¼Œæ–¹ä¾¿åç»­å¤ç”¨ã€‚
- **å®šæ—¶å…³æœº**ï¼šç‚¹å‡» **â€œå®šæ—¶å…³æœºè®¾ç½®â€**ï¼Œå¼€å¯å¹¶è®¾å®šè‡ªåŠ¨åœæ­¢æ—¶é—´ï¼Œé˜²æ­¢å› å¿˜è®°å…³æœºå¯¼è‡´å…è´¹é¢åº¦è€—å°½ã€‚
- **å…¬å¼€å®ä¾‹**ï¼šå°†å®ä¾‹è®¾ç½®ä¸ºå¯¹å·¥ä½œç©ºé—´å†…æ‰€æœ‰æˆå‘˜å¯è§ï¼ˆ**æ³¨æ„ï¼šæ­¤æ“ä½œä¸å¯é€†**ï¼Œä¸€æ—¦å…¬å¼€æ— æ³•è½¬å›ç§æœ‰ï¼‰ã€‚

![img](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251426095.png)

##### **åŒºåŸŸâ‘ **

æ‚¨å¯ä»¥åœ¨åŒºåŸŸâ‘ å•å‡»DSWå®ä¾‹åç§°ï¼Œè¿›å…¥å®ä¾‹è¯¦æƒ…é¡µé¢ï¼ŒæŸ¥çœ‹å’Œä¿®æ”¹DSWå®ä¾‹çš„åŸºç¡€ä¿¡æ¯å’Œå®ä¾‹é…ç½®ã€‚

- åœ¨**åŸºæœ¬ä¿¡æ¯**åŒºåŸŸï¼Œä¿®æ”¹å®ä¾‹åç§°ã€‚

- åœ¨**äº‹ä»¶**é¡µç­¾ï¼ŒæŸ¥çœ‹DSWå®ä¾‹ç›¸å…³äº‹ä»¶ã€‚

- åœ¨**ç”Ÿå‘½å‘¨æœŸ**é¡µç­¾ï¼ŒæŸ¥çœ‹DSWå®ä¾‹ç”Ÿå‘½å‘¨æœŸè¯¦æƒ…ã€‚

- å•å‡»**å…¬å¼€å®ä¾‹**ï¼Œè¯¥DSWå®ä¾‹å°†ä¼šåœ¨å·¥ä½œç©ºé—´ä¸‹å…¬å¼€å¯è§ï¼Œè¯¥å·¥ä½œç©ºé—´å†…çš„å…¶ä»–æˆå‘˜éƒ½å¯ä»¥è®¿é—®ã€‚

  **é‡è¦**

  å®ä¾‹ä¸€æ—¦å…¬å¼€ï¼Œå°†ä¸å¯ä»¥å†è½¬ä¸ºç§æœ‰ã€‚è¯·è°¨æ…æ“ä½œã€‚

- å•å‡»**å˜æ›´é…ç½®**ï¼Œæ‚¨å¯ä»¥ä¿®æ”¹èµ„æºä¿¡æ¯ã€ç¯å¢ƒä¿¡æ¯å’Œç½‘ç»œé…ç½®ç­‰ã€‚

![image](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251427038.png)

##### **åŒºåŸŸâ‘¡**

æ‚¨å¯ä»¥åœ¨åŒºåŸŸâ‘¡æŸ¥çœ‹å¹¶å¤åˆ¶DSWå®ä¾‹IDã€‚

##### **åŒºåŸŸâ‘¢**

æ‚¨å¯ä»¥å°†é¼ æ ‡æ‚¬æµ®åˆ°åŒºåŸŸâ‘¢ï¼ŒæŸ¥çœ‹DSWå®ä¾‹ç”Ÿå‘½å‘¨æœŸè¯¦æƒ…å’Œèµ„æºç±»å‹è¯¦æƒ…ã€‚

##### **åŒºåŸŸâ‘£**

æ‚¨å¯ä»¥åœ¨åŒºåŸŸâ‘£å¯¹ç›®æ ‡DSWå®ä¾‹è¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š

- æ‰“å¼€DSWå®ä¾‹

  å•å‡»**æ‰“å¼€**ï¼Œè¿›å…¥DSWå®ä¾‹æ“ä½œé¡µé¢ã€‚

- åœæ­¢DSWå®ä¾‹

  å•å‡»**åœæ­¢**ï¼Œåœæ­¢DSWå®ä¾‹ã€‚

  **é‡è¦**

  - ä½¿ç”¨**ä¸“æœ‰èµ„æºç»„**åˆ›å»ºçš„DSWå®ä¾‹å¦‚æœæœªæŒ‚è½½æ•°æ®é›†ï¼Œå°†ä½¿ç”¨å®ä¾‹è‡ªå¸¦çš„ç³»ç»Ÿç›˜ä½œä¸ºä¸´æ—¶å­˜å‚¨ï¼Œåœæ­¢æˆ–åˆ é™¤DSWå®ä¾‹åï¼Œç›¸å…³æ•°æ®å°†è¢«åˆ é™¤ä¸”æ— æ³•æ¢å¤ï¼Œè¯·è°¨æ…æ“ä½œã€‚
  - ä½¿ç”¨**å…¬å…±èµ„æºç»„**åˆ›å»ºçš„DSWå®ä¾‹ï¼Œåœ¨åœæ­¢å®ä¾‹åï¼Œå®ä¾‹æŒ‚è½½çš„å…è´¹äº‘ç›˜ä¼šå¸®æ‚¨ä¿å­˜ä½¿ç”¨ç¯å¢ƒï¼Œä½†åœæœºå15å¤©å†…å®ä¾‹å¦‚æœªå†æ¬¡å¯åŠ¨ï¼Œäº‘ç›˜ç¯å¢ƒå°†è¢«é‡Šæ”¾ã€‚
  - å¦‚æœåˆ›å»ºDSWå®ä¾‹æ—¶æœ‰æ‰©å®¹è¿‡ç³»ç»Ÿç›˜ï¼Œå³ä½¿åœæ­¢å®ä¾‹è¿è¡Œï¼Œç³»ç»Ÿç›˜ä»ä¼šæŒç»­è®¡è´¹ã€‚å¦‚æœæ‚¨æƒ³åœæ­¢DSWå®ä¾‹ç›¸å…³çš„ä¸€åˆ‡è®¡è´¹ï¼Œè¯·åˆ é™¤DSWå®ä¾‹ã€‚**åˆ é™¤å‰è¯·åŠ¡å¿…ç¡®ä¿å¿…è¦æ•°æ®å·²å¤‡ä»½ã€‚**

- å¯åŠ¨DSWå®ä¾‹

  å•å‡»**å¯åŠ¨**ï¼Œå†æ¬¡ä½¿ç”¨å·²ç»è¢«åœæ­¢çš„å®ä¾‹ã€‚å¯åŠ¨å®ä¾‹åï¼Œéœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå½“å®ä¾‹**çŠ¶æ€**ç”±**å¯åŠ¨ä¸­**å˜ä¸º**è¿è¡Œä¸­**æ—¶ï¼Œè¡¨æ˜DSWå®ä¾‹å¯åŠ¨å®Œæˆã€‚

- [åˆ¶ä½œé•œåƒ](https://help.aliyun.com/zh/pai/user-guide/create-a-dsw-instance-image)

  å•å‡»**åˆ¶ä½œé•œåƒ**ï¼ŒæŒ‰ç…§ç•Œé¢æ“ä½œæŒ‡å¼•ï¼Œå°†å½“å‰è¿è¡Œä¸­çš„DSWå®ä¾‹ç¯å¢ƒä¿å­˜åˆ°ä¸ªäººç‰ˆæˆ–ä¼ä¸šç‰ˆACRä¸­ï¼Œåç»­æ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨è¯¥é•œåƒã€‚

- å˜æ›´é…ç½®

  å•å‡»**å˜æ›´é…ç½®**ï¼Œæ‚¨å¯ä»¥ä¿®æ”¹èµ„æºä¿¡æ¯ã€ç¯å¢ƒä¿¡æ¯å’Œç½‘ç»œé…ç½®ç­‰ã€‚

- å®šæ—¶å…³æœºè®¾ç½®

  å•å‡»**å®šæ—¶å…³æœºè®¾ç½®**åï¼Œæ‚¨å¯ä»¥åœ¨å¯¹è¯æ¡†ä¸­æ‰“å¼€**å¯ç”¨å®šæ—¶å…³æœº**ï¼Œå¹¶è®¾ç½®**å®šæ—¶å…³æœºæ—¶é—´**ï¼Œåœ¨æŒ‡å®šçš„æ—¶é—´åˆ°è¾¾æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœæ­¢DSWå®ä¾‹ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨å·¥ä½œç©ºé—´çš„[è°ƒåº¦ä¸­å¿ƒ](https://help.aliyun.com/zh/pai/workspace-scheduling-center)è®¾ç½®DSWè‡ªåŠ¨å›æ”¶ç­–ç•¥ã€‚

##### **åŒºåŸŸâ‘¤**

å•å‡»![image](https://cdn.jsdelivr.net/gh/Fly0905/note-picture@main/imag/202511251427702.png)ï¼Œç„¶åå•å‡»**åˆ é™¤**ï¼Œå³å¯åˆ é™¤DSWå®ä¾‹ã€‚

#### 4. åœæ­¢ä¸é‡Šæ”¾çš„æ³¨æ„äº‹é¡¹

ä¸ºé¿å…äº§ç”Ÿä¸å¿…è¦çš„è´¹ç”¨ï¼Œè¯·åŠ¡å¿…åŒºåˆ†â€œåœæ­¢â€ä¸â€œåˆ é™¤â€çš„åŒºåˆ«ï¼š

- **åœæ­¢å®ä¾‹**ï¼š
  - å•å‡» **â€œåœæ­¢â€**ï¼Œå®ä¾‹è¿›å…¥å…³æœºçŠ¶æ€ã€‚
  - **æ•°æ®ä¿ç•™è§„åˆ™**ï¼šä½¿ç”¨å…¬å…±èµ„æºï¼ˆå…è´¹è¯•ç”¨ï¼‰åˆ›å»ºçš„å®ä¾‹ï¼Œåœæ­¢åæ•°æ®ä¿ç•™ **15 å¤©**ã€‚è‹¥ 15 å¤©å†…æœªé‡å¯ï¼Œç¯å¢ƒå°†è¢«é‡Šæ”¾ã€‚
  - **è®¡è´¹é™·é˜±**ï¼šå¦‚æœåˆ›å»ºæ—¶**æ‰©å®¹è¿‡ç³»ç»Ÿç›˜**ï¼ˆè¶…è¿‡ 100GBï¼‰ï¼Œå³ä½¿å®ä¾‹å·²åœæ­¢ï¼Œæ‰©å®¹éƒ¨åˆ†çš„ç£ç›˜è´¹ç”¨ä»ä¼šæŒç»­æ‰£é™¤ã€‚
- **åˆ é™¤å®ä¾‹**ï¼š
  - å•å‡» **â€œ...â€** > **â€œåˆ é™¤â€**ã€‚
  - **å½»åº•é‡Šæ”¾**ï¼šè¿™æ˜¯å”¯ä¸€èƒ½åœæ­¢æ‰€æœ‰è®¡è´¹ï¼ˆåŒ…æ‹¬æ‰©å®¹ç£ç›˜è´¹ï¼‰çš„æ“ä½œã€‚
  - **æ•°æ®è­¦ç¤º**ï¼šåˆ é™¤å‰è¯·åŠ¡å¿…å¤‡ä»½ä»£ç å’Œæ¨¡å‹ï¼Œåˆ é™¤åæ•°æ®ä¸å¯æ¢å¤ã€‚

------

### ç¬¬å››é˜¶æ®µï¼šé‡Šæ”¾èµ„æºï¼ˆé˜²æ‰£è´¹æ“ä½œï¼‰

**ç›®æ ‡**ï¼šå®‰å…¨ä¸‹è½¦ï¼Œä¸ç•™éšæ‚£ã€‚

æ¯æ¬¡å­¦ä¹ ç»“æŸï¼ˆå¦‚å½“ä½ å‡†å¤‡åˆä¸Šç”µè„‘ç¡è§‰æ—¶ï¼‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹ **æ ‡å‡†é€€åœºæµç¨‹**ï¼š

1. **ä¿å­˜æˆæœ**
   - å¾®è°ƒåçš„æ¨¡å‹æƒé‡æ–‡ä»¶ï¼ˆLoRA weightsï¼‰é€šå¸¸ä¸å¤§ã€‚
   - å»ºè®®åœ¨ DSW é‡Œçš„ Terminal ä½¿ç”¨ `tar` å‘½ä»¤æ‰“åŒ…ï¼Œç„¶å**ä¸‹è½½åˆ°æœ¬åœ°ç”µè„‘**ã€‚
   - *æ³¨æ„*ï¼šä¸è¦ä¾èµ– OSS å¯¹è±¡å­˜å‚¨æ¥é•¿æœŸå­˜æ”¾å¤§é‡æ•°æ®ï¼ŒOSS ä¹Ÿæ˜¯å•ç‹¬æ”¶è´¹çš„ã€‚
2. **å½»åº•åˆ é™¤å®ä¾‹**
   - å›åˆ° PAI-DSW æ§åˆ¶å°åˆ—è¡¨é¡µã€‚
   - æ‰¾åˆ°ä½ çš„å®ä¾‹ã€‚
   - ç‚¹å‡»å³ä¾§çš„ **â€œæ›´å¤šâ€** -> **â€œåˆ é™¤â€**ã€‚
   - **å†æ¬¡å¼ºè°ƒ**ï¼šè™½ç„¶æœ‰â€œåœæ­¢â€æŒ‰é’®ï¼Œä½†å¯¹äºæ–°æ‰‹ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ç›´æ¥ **â€œåˆ é™¤â€**ã€‚
     - *ç†ç”±*ï¼šåˆ é™¤æ˜¯ç‰©ç†æ¸…é™¤ï¼Œç»æ— åæ‚£ã€‚ä¸‹æ¬¡å­¦ä¹ æ—¶é‡æ–°åˆ›å»ºä¸€ä¸ªç¯å¢ƒåªéœ€è¦ 3-5 åˆ†é’Ÿï¼Œè¿™æ¯”å› ä¸ºå¿˜è®°å…³æœºæˆ–æ‰©å®¹ç£ç›˜è€Œè¢«æ‰£å‡ ç™¾å—é’±è¦åˆ’ç®—å¾—å¤šã€‚

------

### å¸¸è§â€œå¹½çµæ‰£è´¹â€è‡ªæŸ¥

å¦‚æœæ‚¨æ”¶åˆ°æ‰£è´¹çŸ­ä¿¡ï¼Œé€šå¸¸æ˜¯ä»¥ä¸‹åŸå› ï¼Œè¯·ç«‹å³æ ¸æŸ¥ï¼š

1. **åœ°åŸŸé€‰é”™äº†**ï¼šé€‰äº†ä¸æ”¯æŒè¯•ç”¨çš„åœ°åŸŸï¼ˆå¦‚ä¸­å›½é¦™æ¸¯ç­‰ï¼‰ã€‚
2. **ç£ç›˜æ‰©å®¹äº†**ï¼šåˆ›å»ºæ—¶æ‰‹æ»‘æŠŠç³»ç»Ÿç›˜æ‹‰åˆ°äº† 200GBã€‚
3. **æœˆåº¦é¢åº¦ç”¨è¶…äº†**ï¼šæœ¬æœˆè·‘äº†è¶…è¿‡ 36 å°æ—¶ï¼ˆA10æ˜¾å¡ï¼‰ï¼Œè¶…å‡ºçš„éƒ¨åˆ†å¼€å§‹è®¡è´¹ã€‚
4. **EAS/DLC æ²¡å…³**ï¼šå¦‚æœæ‚¨å°è¯•äº† EASï¼ˆæ¨¡å‹åœ¨çº¿éƒ¨ç½²ï¼‰ï¼Œé‚£ä¸ªéå¸¸è´µï¼Œä¸€å®šè¦å» EAS é¡µé¢æŠŠå®ƒä¹Ÿåˆ æ‰ã€‚

## å¸¸è§é—®é¢˜

### 1. æ— æ³•è®¿é—®`modelscope.cn`

- **é—®é¢˜åŸå› **ï¼šä½ çš„äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘ DSWï¼‰æŠŠ `modelscope.cn` è§£æåˆ°äº†å†…ç½‘ IP `10.224.157.146`ï¼Œä½†è¿™ä¸ªå†…ç½‘çº¿è·¯ä¸é€šï¼ˆPacket Loss 100%ï¼‰ã€‚
- **è§£å†³æ–¹æ³•**ï¼šå¼ºåˆ¶è®©æœåŠ¡å™¨èµ°ä½ æµ‹è¯•é€šè¿‡çš„å…¬ç½‘ IP `39.99.133.195`ã€‚

åœ¨ Ubuntu ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ `/etc/hosts` æ–‡ä»¶æ¥å®ç°è¿™ä¸ªâ€œå¼ºåˆ¶æŒ‡å®šâ€ã€‚

#### æ–¹æ³•ä¸€ï¼šåœ¨ç»ˆç«¯ï¼ˆTerminalï¼‰ä¸­æ‰§è¡Œå‘½ä»¤ï¼ˆæ¨èï¼‰

ç°åœ¨ä½ çš„æœ¬åœ°è®¿é—®`www.modelscope.cn`ï¼Œè·å–å¯è®¿é—®çš„IPåœ°å€

```bash
C:\Users\FLY>ping www.modelscope.cn

æ­£åœ¨ Ping www.modelscope.cn [39.99.133.195] å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:
æ¥è‡ª 39.99.133.195 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=21ms TTL=88
æ¥è‡ª 39.99.133.195 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=21ms TTL=88
æ¥è‡ª 39.99.133.195 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=21ms TTL=88

39.99.133.195 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:
    æ•°æ®åŒ…: å·²å‘é€ = 3ï¼Œå·²æ¥æ”¶ = 3ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)ï¼Œ
å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):
    æœ€çŸ­ = 21msï¼Œæœ€é•¿ = 21msï¼Œå¹³å‡ = 21ms
Control-C
^C
C:\Users\FLY>
```

ç›´æ¥å¤åˆ¶ä»¥ä¸‹ä¸¤æ¡å‘½ä»¤åœ¨ç»ˆç«¯è¿è¡Œï¼Œè¿™ä¼šå°†æ­£ç¡®çš„ IPï¼ˆå¦‚ä¸Šè·å–çš„`39.99.133.195 `ï¼‰ å†™å…¥ hosts æ–‡ä»¶ï¼š

```Bash
# 1. å¼ºåˆ¶å°† modelscope.cn æŒ‡å‘å…¬ç½‘ IP
echo "39.99.133.195 modelscope.cn" >> /etc/hosts

# 2. ä¸ºäº†ä¿é™©ï¼ŒæŠŠå¸¦ www çš„ä¹ŸæŒ‡è¿‡å»
echo "39.99.133.195 www.modelscope.cn" >> /etc/hosts
```

------

#### æ–¹æ³•äºŒï¼šåœ¨ Jupyter Notebook ä¸­æ‰§è¡Œï¼ˆå¦‚æœä½ ä¸æ–¹ä¾¿å¼€ç»ˆç«¯ï¼‰

åœ¨ä½ çš„ Notebook ä»£ç å•å…ƒæ ¼ä¸­è¿è¡Œä»¥ä¸‹ Python ä»£ç ï¼š

```Python
import os

# å®šä¹‰è¦å†™å…¥çš„å†…å®¹
lines_to_add = [
    "\n",
    "# Manually fix ModelScope IP connectivity issues\n",
    "39.99.133.195 modelscope.cn\n",
    "39.99.133.195 www.modelscope.cn\n"
]

# è¿½åŠ åˆ° /etc/hosts æ–‡ä»¶
try:
    with open("/etc/hosts", "a") as f:
        f.writelines(lines_to_add)
    print("âœ… æˆåŠŸï¼å·²ä¿®æ”¹ /etc/hosts æ–‡ä»¶ã€‚")
except PermissionError:
    print("âŒ å¤±è´¥ï¼šæ²¡æœ‰æƒé™ã€‚è¯·ç¡®ä¿ä½ æ˜¯ä»¥ root ç”¨æˆ·è¿è¡Œï¼ˆDSWé»˜è®¤é€šå¸¸æ˜¯rootï¼‰ã€‚")
```

------

#### éªŒè¯ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆ

ä¿®æ”¹å®Œæˆåï¼Œå†æ¬¡åœ¨ç»ˆç«¯è¿è¡Œ Ping å‘½ä»¤ï¼Œç¡®è®¤ IP å·²ç»å˜äº†ï¼š

```Bash
ping modelscope.cn
```

**é¢„æœŸçš„æ­£ç¡®è¾“å‡º**ï¼ˆåº”è¯¥èƒ½é€šäº†ï¼‰ï¼š

```Bash
PING modelscope.cn (39.99.133.195) 56(84) bytes of data.
64 bytes from 39.99.133.195: icmp_seq=1 ttl=92 time=6.55 ms
...
```

ä¸€æ—¦ Ping é€šï¼Œä½ ä¹‹å‰å¤±è´¥çš„ LLaMA-Factory ä¸‹è½½ä»»åŠ¡å°±å¯ä»¥é‡æ–°å¼€å§‹äº†ï¼

## å‚è€ƒé“¾æ¥

[é˜¿é‡Œäº‘DSWå…è´¹è¯•ç”¨é¢†å–ã€ä½¿ç”¨å’Œé‡Šæ”¾](https://help.aliyun.com/zh/pai/getting-started/free-trial-guide?spm=5176.smartservice_service_robot_chat_new.0.0.1d3d3a98uBTWjJ&__dialog_id=525566971&__url_role=2&scm=20140722.S_help%40%40%E6%96%87%E6%A1%A3%40%402858359._.ID_help%40%40%E6%96%87%E6%A1%A3%40%402858359-RL_PAI~DAS~DSW%E5%85%8D%E8%B4%B9%E8%AF%95%E7%94%A8-LOC_2024SPAllResult-OR_ser-PAR1_2150419e17640402225065487e191b-V_4-PAR3_o-RE_new5-P0_0-P1_0)